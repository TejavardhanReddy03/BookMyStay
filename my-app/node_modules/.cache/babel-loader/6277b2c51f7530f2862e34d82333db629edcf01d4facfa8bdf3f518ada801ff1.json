{"ast":null,"code":"import PhotosUploader from\"../PhotosUploader.js\";import Perks from\"../Perks.js\";import{useEffect,useState}from\"react\";import axios from\"axios\";import AccountNav from\"../AccountNav\";import{Navigate,useParams}from\"react-router-dom\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PlacesFormPage(){const{id}=useParams();const[title,setTitle]=useState('');const[address,setAddress]=useState('');const[addedPhotos,setAddedPhotos]=useState([]);const[description,setDescription]=useState('');const[perks,setPerks]=useState([]);const[extraInfo,setExtraInfo]=useState('');const[checkIn,setCheckIn]=useState('');const[checkOut,setCheckOut]=useState('');const[maxGuests,setMaxGuests]=useState(1);const[price,setPrice]=useState(100);const[redirect,setRedirect]=useState(false);useEffect(()=>{if(!id){return;}axios.get('/places/'+id).then(response=>{const{data}=response;setTitle(data.title);setAddress(data.address);setAddedPhotos(data.photos);setDescription(data.description);setPerks(data.perks);setExtraInfo(data.extraInfo);setCheckIn(data.checkIn);setCheckOut(data.checkOut);setMaxGuests(data.maxGuests);setPrice(data.price);});},[id]);function preInput(header,description){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl mt-4\",children:header}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm\",children:description})]});}async function savePlace(ev){ev.preventDefault();const placeData={title,address,addedPhotos,description,perks,extraInfo,checkIn,checkOut,maxGuests,price};if(id){// update\nawait axios.put('/places',{id,...placeData});setRedirect(true);}else{// new place\nawait axios.post('/places',placeData);setRedirect(true);}}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/account/places'});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AccountNav,{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:savePlace,children:[preInput('Title','Title for your place. should be short and catchy as in advertisement'),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,onChange:ev=>setTitle(ev.target.value),placeholder:\"title, for example: My lovely apt\"}),preInput('Address','Address to this place'),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:address,onChange:ev=>setAddress(ev.target.value),placeholder:\"address\"}),preInput('Photos','more = better'),/*#__PURE__*/_jsx(PhotosUploader,{addedPhotos:addedPhotos,onChange:setAddedPhotos}),preInput('Description','description of the place'),/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:ev=>setDescription(ev.target.value)}),preInput('Perks','select all the perks of your place'),/*#__PURE__*/_jsx(\"div\",{className:\"grid mt-2 gap-2 grid-cols-2 md:grid-cols-3 lg:grid-cols-6\",children:/*#__PURE__*/_jsx(Perks,{selected:perks,onChange:setPerks})}),preInput('Extra info','house rules, etc'),/*#__PURE__*/_jsx(\"textarea\",{value:extraInfo,onChange:ev=>setExtraInfo(ev.target.value)}),preInput('Check in&out times','add check in and out times, remember to have some time window for cleaning the room between guests'),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-2 grid-cols-2 md:grid-cols-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 -mb-1\",children:\"Check in time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:checkIn,onChange:ev=>setCheckIn(ev.target.value),placeholder:\"14\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 -mb-1\",children:\"Check out time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:checkOut,onChange:ev=>setCheckOut(ev.target.value),placeholder:\"11\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 -mb-1\",children:\"Max number of guests\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:maxGuests,onChange:ev=>setMaxGuests(ev.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 -mb-1\",children:\"Price per night\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:price,onChange:ev=>setPrice(ev.target.value)})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 my-4\",children:\"Save\"})]})]});}","map":{"version":3,"names":["PhotosUploader","Perks","useEffect","useState","axios","AccountNav","Navigate","useParams","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","PlacesFormPage","id","title","setTitle","address","setAddress","addedPhotos","setAddedPhotos","description","setDescription","perks","setPerks","extraInfo","setExtraInfo","checkIn","setCheckIn","checkOut","setCheckOut","maxGuests","setMaxGuests","price","setPrice","redirect","setRedirect","get","then","response","data","photos","preInput","header","children","className","savePlace","ev","preventDefault","placeData","put","post","to","onSubmit","type","value","onChange","target","placeholder","selected"],"sources":["C:/Users/tejav/Downloads/hotel_project/my-app/src/components/PlacesFormPage.js"],"sourcesContent":["import PhotosUploader from \"../PhotosUploader.js\";\r\nimport Perks from \"../Perks.js\";\r\nimport {useEffect, useState} from \"react\";\r\nimport axios from \"axios\";\r\nimport AccountNav from \"../AccountNav\";\r\nimport {Navigate, useParams} from \"react-router-dom\";\r\n\r\nexport default function PlacesFormPage() {\r\n  const {id} = useParams();\r\n  const [title,setTitle] = useState('');\r\n  const [address,setAddress] = useState('');\r\n  const [addedPhotos,setAddedPhotos] = useState([]);\r\n  const [description,setDescription] = useState('');\r\n  const [perks,setPerks] = useState([]);\r\n  const [extraInfo,setExtraInfo] = useState('');\r\n  const [checkIn,setCheckIn] = useState('');\r\n  const [checkOut,setCheckOut] = useState('');\r\n  const [maxGuests,setMaxGuests] = useState(1);\r\n  const [price,setPrice] = useState(100);\r\n  const [redirect,setRedirect] = useState(false);\r\n  useEffect(() => {\r\n    if (!id) {\r\n      return;\r\n    }\r\n    axios.get('/places/'+id).then(response => {\r\n       const {data} = response;\r\n       setTitle(data.title);\r\n       setAddress(data.address);\r\n       setAddedPhotos(data.photos);\r\n       setDescription(data.description);\r\n       setPerks(data.perks);\r\n       setExtraInfo(data.extraInfo);\r\n       setCheckIn(data.checkIn);\r\n       setCheckOut(data.checkOut);\r\n       setMaxGuests(data.maxGuests);\r\n       setPrice(data.price);\r\n    });\r\n  }, [id]);\r\n  \r\n  function preInput(header,description) {\r\n    return (\r\n      <>\r\n        <h2 className=\"text-2xl mt-4\">{header}</h2>\r\n        <p className=\"text-gray-500 text-sm\">{description}</p>\r\n      </>\r\n    );\r\n  }\r\n\r\n  async function savePlace(ev) {\r\n    ev.preventDefault();\r\n    const placeData = {\r\n      title, address, addedPhotos,\r\n      description, perks, extraInfo,\r\n      checkIn, checkOut, maxGuests, price,\r\n    };\r\n    if (id) {\r\n      // update\r\n      await axios.put('/places', {\r\n        id, ...placeData\r\n      });\r\n      setRedirect(true);\r\n    } else {\r\n      // new place\r\n      await axios.post('/places', placeData);\r\n      setRedirect(true);\r\n    }\r\n\r\n  }\r\n\r\n  if (redirect) {\r\n    return <Navigate to={'/account/places'} />\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <AccountNav />\r\n      <form onSubmit={savePlace}>\r\n        {preInput('Title', 'Title for your place. should be short and catchy as in advertisement')}\r\n        <input type=\"text\" value={title} onChange={ev => setTitle(ev.target.value)} placeholder=\"title, for example: My lovely apt\"/>\r\n        {preInput('Address', 'Address to this place')}\r\n        <input type=\"text\" value={address} onChange={ev => setAddress(ev.target.value)}placeholder=\"address\"/>\r\n        {preInput('Photos','more = better')}\r\n        <PhotosUploader addedPhotos={addedPhotos} onChange={setAddedPhotos} />\r\n        {preInput('Description','description of the place')}\r\n        <textarea value={description} onChange={ev => setDescription(ev.target.value)} />\r\n        {preInput('Perks','select all the perks of your place')}\r\n        <div className=\"grid mt-2 gap-2 grid-cols-2 md:grid-cols-3 lg:grid-cols-6\">\r\n          <Perks selected={perks} onChange={setPerks} />\r\n        </div>\r\n        {preInput('Extra info','house rules, etc')}\r\n        <textarea value={extraInfo} onChange={ev => setExtraInfo(ev.target.value)} />\r\n        {preInput('Check in&out times','add check in and out times, remember to have some time window for cleaning the room between guests')}\r\n        <div className=\"grid gap-2 grid-cols-2 md:grid-cols-4\">\r\n          <div>\r\n            <h3 className=\"mt-2 -mb-1\">Check in time</h3>\r\n            <input type=\"text\"\r\n                   value={checkIn}\r\n                   onChange={ev => setCheckIn(ev.target.value)}\r\n                   placeholder=\"14\"/>\r\n          </div>\r\n          <div>\r\n            <h3 className=\"mt-2 -mb-1\">Check out time</h3>\r\n            <input type=\"text\"\r\n                   value={checkOut}\r\n                   onChange={ev => setCheckOut(ev.target.value)}\r\n                   placeholder=\"11\" />\r\n          </div>\r\n          <div>\r\n            <h3 className=\"mt-2 -mb-1\">Max number of guests</h3>\r\n            <input type=\"number\" value={maxGuests}\r\n                   onChange={ev => setMaxGuests(ev.target.value)}/>\r\n          </div>\r\n          <div>\r\n            <h3 className=\"mt-2 -mb-1\">Price per night</h3>\r\n            <input type=\"number\" value={price}\r\n                   onChange={ev => setPrice(ev.target.value)}/>\r\n          </div>\r\n        </div>\r\n        <button className=\"bg-red-500 my-4\">Save</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"mappings":"AAAA,MAAO,CAAAA,cAAc,KAAM,sBAAsB,CACjD,MAAO,CAAAC,KAAK,KAAM,aAAa,CAC/B,OAAQC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CACzC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,UAAU,KAAM,eAAe,CACtC,OAAQC,QAAQ,CAAEC,SAAS,KAAO,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErD,cAAe,SAAS,CAAAC,cAAcA,CAAA,CAAG,CACvC,KAAM,CAACC,EAAE,CAAC,CAAGR,SAAS,CAAC,CAAC,CACxB,KAAM,CAACS,KAAK,CAACC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACrC,KAAM,CAACe,OAAO,CAACC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACzC,KAAM,CAACiB,WAAW,CAACC,cAAc,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CACjD,KAAM,CAACmB,WAAW,CAACC,cAAc,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CACjD,KAAM,CAACqB,KAAK,CAACC,QAAQ,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CACrC,KAAM,CAACuB,SAAS,CAACC,YAAY,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CAC7C,KAAM,CAACyB,OAAO,CAACC,UAAU,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CACzC,KAAM,CAAC2B,QAAQ,CAACC,WAAW,CAAC,CAAG5B,QAAQ,CAAC,EAAE,CAAC,CAC3C,KAAM,CAAC6B,SAAS,CAACC,YAAY,CAAC,CAAG9B,QAAQ,CAAC,CAAC,CAAC,CAC5C,KAAM,CAAC+B,KAAK,CAACC,QAAQ,CAAC,CAAGhC,QAAQ,CAAC,GAAG,CAAC,CACtC,KAAM,CAACiC,QAAQ,CAACC,WAAW,CAAC,CAAGlC,QAAQ,CAAC,KAAK,CAAC,CAC9CD,SAAS,CAAC,IAAM,CACd,GAAI,CAACa,EAAE,CAAE,CACP,OACF,CACAX,KAAK,CAACkC,GAAG,CAAC,UAAU,CAACvB,EAAE,CAAC,CAACwB,IAAI,CAACC,QAAQ,EAAI,CACvC,KAAM,CAACC,IAAI,CAAC,CAAGD,QAAQ,CACvBvB,QAAQ,CAACwB,IAAI,CAACzB,KAAK,CAAC,CACpBG,UAAU,CAACsB,IAAI,CAACvB,OAAO,CAAC,CACxBG,cAAc,CAACoB,IAAI,CAACC,MAAM,CAAC,CAC3BnB,cAAc,CAACkB,IAAI,CAACnB,WAAW,CAAC,CAChCG,QAAQ,CAACgB,IAAI,CAACjB,KAAK,CAAC,CACpBG,YAAY,CAACc,IAAI,CAACf,SAAS,CAAC,CAC5BG,UAAU,CAACY,IAAI,CAACb,OAAO,CAAC,CACxBG,WAAW,CAACU,IAAI,CAACX,QAAQ,CAAC,CAC1BG,YAAY,CAACQ,IAAI,CAACT,SAAS,CAAC,CAC5BG,QAAQ,CAACM,IAAI,CAACP,KAAK,CAAC,CACvB,CAAC,CAAC,CACJ,CAAC,CAAE,CAACnB,EAAE,CAAC,CAAC,CAER,QAAS,CAAA4B,QAAQA,CAACC,MAAM,CAACtB,WAAW,CAAE,CACpC,mBACET,KAAA,CAAAF,SAAA,EAAAkC,QAAA,eACEpC,IAAA,OAAIqC,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAED,MAAM,CAAK,CAAC,cAC3CnC,IAAA,MAAGqC,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CAAEvB,WAAW,CAAI,CAAC,EACtD,CAAC,CAEP,CAEA,cAAe,CAAAyB,SAASA,CAACC,EAAE,CAAE,CAC3BA,EAAE,CAACC,cAAc,CAAC,CAAC,CACnB,KAAM,CAAAC,SAAS,CAAG,CAChBlC,KAAK,CAAEE,OAAO,CAAEE,WAAW,CAC3BE,WAAW,CAAEE,KAAK,CAAEE,SAAS,CAC7BE,OAAO,CAAEE,QAAQ,CAAEE,SAAS,CAAEE,KAChC,CAAC,CACD,GAAInB,EAAE,CAAE,CACN;AACA,KAAM,CAAAX,KAAK,CAAC+C,GAAG,CAAC,SAAS,CAAE,CACzBpC,EAAE,CAAE,GAAGmC,SACT,CAAC,CAAC,CACFb,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,IAAM,CACL;AACA,KAAM,CAAAjC,KAAK,CAACgD,IAAI,CAAC,SAAS,CAAEF,SAAS,CAAC,CACtCb,WAAW,CAAC,IAAI,CAAC,CACnB,CAEF,CAEA,GAAID,QAAQ,CAAE,CACZ,mBAAO3B,IAAA,CAACH,QAAQ,EAAC+C,EAAE,CAAE,iBAAkB,CAAE,CAAC,CAC5C,CAEA,mBACExC,KAAA,QAAAgC,QAAA,eACEpC,IAAA,CAACJ,UAAU,GAAE,CAAC,cACdQ,KAAA,SAAMyC,QAAQ,CAAEP,SAAU,CAAAF,QAAA,EACvBF,QAAQ,CAAC,OAAO,CAAE,sEAAsE,CAAC,cAC1FlC,IAAA,UAAO8C,IAAI,CAAC,MAAM,CAACC,KAAK,CAAExC,KAAM,CAACyC,QAAQ,CAAET,EAAE,EAAI/B,QAAQ,CAAC+B,EAAE,CAACU,MAAM,CAACF,KAAK,CAAE,CAACG,WAAW,CAAC,mCAAmC,CAAC,CAAC,CAC5HhB,QAAQ,CAAC,SAAS,CAAE,uBAAuB,CAAC,cAC7ClC,IAAA,UAAO8C,IAAI,CAAC,MAAM,CAACC,KAAK,CAAEtC,OAAQ,CAACuC,QAAQ,CAAET,EAAE,EAAI7B,UAAU,CAAC6B,EAAE,CAACU,MAAM,CAACF,KAAK,CAAE,CAAAG,WAAW,CAAC,SAAS,CAAC,CAAC,CACrGhB,QAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,cACnClC,IAAA,CAACT,cAAc,EAACoB,WAAW,CAAEA,WAAY,CAACqC,QAAQ,CAAEpC,cAAe,CAAE,CAAC,CACrEsB,QAAQ,CAAC,aAAa,CAAC,0BAA0B,CAAC,cACnDlC,IAAA,aAAU+C,KAAK,CAAElC,WAAY,CAACmC,QAAQ,CAAET,EAAE,EAAIzB,cAAc,CAACyB,EAAE,CAACU,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,CAChFb,QAAQ,CAAC,OAAO,CAAC,oCAAoC,CAAC,cACvDlC,IAAA,QAAKqC,SAAS,CAAC,2DAA2D,CAAAD,QAAA,cACxEpC,IAAA,CAACR,KAAK,EAAC2D,QAAQ,CAAEpC,KAAM,CAACiC,QAAQ,CAAEhC,QAAS,CAAE,CAAC,CAC3C,CAAC,CACLkB,QAAQ,CAAC,YAAY,CAAC,kBAAkB,CAAC,cAC1ClC,IAAA,aAAU+C,KAAK,CAAE9B,SAAU,CAAC+B,QAAQ,CAAET,EAAE,EAAIrB,YAAY,CAACqB,EAAE,CAACU,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,CAC5Eb,QAAQ,CAAC,oBAAoB,CAAC,oGAAoG,CAAC,cACpI9B,KAAA,QAAKiC,SAAS,CAAC,uCAAuC,CAAAD,QAAA,eACpDhC,KAAA,QAAAgC,QAAA,eACEpC,IAAA,OAAIqC,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAC,eAAa,CAAI,CAAC,cAC7CpC,IAAA,UAAO8C,IAAI,CAAC,MAAM,CACXC,KAAK,CAAE5B,OAAQ,CACf6B,QAAQ,CAAET,EAAE,EAAInB,UAAU,CAACmB,EAAE,CAACU,MAAM,CAACF,KAAK,CAAE,CAC5CG,WAAW,CAAC,IAAI,CAAC,CAAC,EACtB,CAAC,cACN9C,KAAA,QAAAgC,QAAA,eACEpC,IAAA,OAAIqC,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAC,gBAAc,CAAI,CAAC,cAC9CpC,IAAA,UAAO8C,IAAI,CAAC,MAAM,CACXC,KAAK,CAAE1B,QAAS,CAChB2B,QAAQ,CAAET,EAAE,EAAIjB,WAAW,CAACiB,EAAE,CAACU,MAAM,CAACF,KAAK,CAAE,CAC7CG,WAAW,CAAC,IAAI,CAAE,CAAC,EACvB,CAAC,cACN9C,KAAA,QAAAgC,QAAA,eACEpC,IAAA,OAAIqC,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAC,sBAAoB,CAAI,CAAC,cACpDpC,IAAA,UAAO8C,IAAI,CAAC,QAAQ,CAACC,KAAK,CAAExB,SAAU,CAC/ByB,QAAQ,CAAET,EAAE,EAAIf,YAAY,CAACe,EAAE,CAACU,MAAM,CAACF,KAAK,CAAE,CAAC,CAAC,EACpD,CAAC,cACN3C,KAAA,QAAAgC,QAAA,eACEpC,IAAA,OAAIqC,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAC,iBAAe,CAAI,CAAC,cAC/CpC,IAAA,UAAO8C,IAAI,CAAC,QAAQ,CAACC,KAAK,CAAEtB,KAAM,CAC3BuB,QAAQ,CAAET,EAAE,EAAIb,QAAQ,CAACa,EAAE,CAACU,MAAM,CAACF,KAAK,CAAE,CAAC,CAAC,EAChD,CAAC,EACH,CAAC,cACN/C,IAAA,WAAQqC,SAAS,CAAC,iBAAiB,CAAAD,QAAA,CAAC,MAAI,CAAQ,CAAC,EAC7C,CAAC,EACJ,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}