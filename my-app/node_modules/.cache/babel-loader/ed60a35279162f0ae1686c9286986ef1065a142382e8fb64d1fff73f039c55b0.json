{"ast":null,"code":"import{useContext,useEffect,useState}from\"react\";import{differenceInCalendarDays}from\"date-fns\";import axios from\"axios\";import{Navigate}from\"react-router-dom\";import{Usercontext}from\"./globalcontext/Usercontext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BookingWidget(_ref){let{place}=_ref;const[checkIn,setCheckIn]=useState('');const[checkOut,setCheckOut]=useState('');const[numberOfGuests,setNumberOfGuests]=useState(1);const[name,setName]=useState('');const[phone,setPhone]=useState('');const[redirect,setRedirect]=useState('');const{user}=useContext(Usercontext);useEffect(()=>{if(user){setName(user.name);}},[user]);let numberOfNights=0;if(checkIn&&checkOut){numberOfNights=differenceInCalendarDays(new Date(checkOut),new Date(checkIn));}async function bookThisPlace(){const response=await axios.post('/bookings',{checkIn,checkOut,numberOfGuests,name,phone,place:place._id,price:numberOfNights*place.price});const bookingId=response.data._id;setRedirect(\"/account/bookings/\".concat(bookingId));}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:redirect});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow p-4 rounded-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl text-center\",children:[\"Price: \\u20B9\",place.price,\" / per night\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-2xl mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"py-3 px-4\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Check in:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:checkIn,onChange:ev=>setCheckIn(ev.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"py-3 px-4 border-l\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Check out:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:checkOut,onChange:ev=>setCheckOut(ev.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"py-3 px-4 border-t\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Number of guests:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:numberOfGuests,onChange:ev=>setNumberOfGuests(ev.target.value)})]}),numberOfNights>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"py-3 px-4 border-t\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Your full name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:ev=>setName(ev.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"Phone number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:phone,onChange:ev=>setPhone(ev.target.value)})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:bookThisPlace,className:\"primary mt-4\",children:[\"Book this place\",numberOfNights>0&&/*#__PURE__*/_jsxs(\"span\",{children:[\" \\u20B9\",numberOfNights*place.price]})]})]});}","map":{"version":3,"names":["useContext","useEffect","useState","differenceInCalendarDays","axios","Navigate","Usercontext","jsx","_jsx","jsxs","_jsxs","BookingWidget","_ref","place","checkIn","setCheckIn","checkOut","setCheckOut","numberOfGuests","setNumberOfGuests","name","setName","phone","setPhone","redirect","setRedirect","user","numberOfNights","Date","bookThisPlace","response","post","_id","price","bookingId","data","concat","to","className","children","type","value","onChange","ev","target","onClick"],"sources":["C:/Users/tejav/Downloads/hotel_project/my-app/src/BookingWidget.js"],"sourcesContent":["import {useContext, useEffect, useState} from \"react\";\r\nimport {differenceInCalendarDays} from \"date-fns\";\r\nimport axios from \"axios\";\r\nimport {Navigate} from \"react-router-dom\";\r\nimport { Usercontext } from \"./globalcontext/Usercontext\";\r\n\r\nexport default function BookingWidget({place}) {\r\n  const [checkIn,setCheckIn] = useState('');\r\n  const [checkOut,setCheckOut] = useState('');\r\n  const [numberOfGuests,setNumberOfGuests] = useState(1);\r\n  const [name,setName] = useState('');\r\n  const [phone,setPhone] = useState('');\r\n  const [redirect,setRedirect] = useState('');\r\n  const {user} = useContext(Usercontext);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setName(user.name);\r\n    }\r\n  }, [user]);\r\n\r\n  let numberOfNights = 0;\r\n  if (checkIn && checkOut) {\r\n    numberOfNights = differenceInCalendarDays(new Date(checkOut), new Date(checkIn));\r\n  }\r\n\r\n  async function bookThisPlace() {\r\n    const response = await axios.post('/bookings', {\r\n      checkIn,checkOut,numberOfGuests,name,phone,\r\n      place:place._id,\r\n      price:numberOfNights * place.price,\r\n    });\r\n    const bookingId = response.data._id;\r\n    setRedirect(`/account/bookings/${bookingId}`);\r\n  }\r\n\r\n  if (redirect) {\r\n    return <Navigate to={redirect} />\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white shadow p-4 rounded-2xl\">\r\n      <div className=\"text-2xl text-center\">\r\n        Price: ₹{place.price} / per night\r\n      </div>\r\n      <div className=\"border rounded-2xl mt-4\">\r\n        <div className=\"flex\">\r\n          <div className=\"py-3 px-4\">\r\n            <label>Check in:</label>\r\n            <input type=\"date\"\r\n                   value={checkIn}\r\n                   onChange={ev => setCheckIn(ev.target.value)}/>\r\n          </div>\r\n          <div className=\"py-3 px-4 border-l\">\r\n            <label>Check out:</label>\r\n            <input type=\"date\" value={checkOut}\r\n                   onChange={ev => setCheckOut(ev.target.value)}/>\r\n          </div>\r\n        </div>\r\n        <div className=\"py-3 px-4 border-t\">\r\n          <label>Number of guests:</label>\r\n          <input type=\"number\"\r\n                 value={numberOfGuests}\r\n                 onChange={ev => setNumberOfGuests(ev.target.value)}/>\r\n        </div>\r\n        {numberOfNights > 0 && (\r\n          <div className=\"py-3 px-4 border-t\">\r\n            <label>Your full name:</label>\r\n            <input type=\"text\"\r\n                   value={name}\r\n                   onChange={ev => setName(ev.target.value)}/>\r\n            <label>Phone number:</label>\r\n            <input type=\"tel\"\r\n                   value={phone}\r\n                   onChange={ev => setPhone(ev.target.value)}/>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <button onClick={bookThisPlace} className=\"primary mt-4\">\r\n        Book this place\r\n        {numberOfNights > 0 && (\r\n          <span> ₹{numberOfNights * place.price}</span>\r\n        )}\r\n      </button>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}